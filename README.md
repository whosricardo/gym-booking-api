# Gym Class Booking API

A RESTful API built with **Spring Boot** and **PostgreSQL** to manage gym classes, trainers, class types, and scheduled class sessions.

This project is being developed as a **learning-oriented backend project**, focusing on clean architecture, REST principles, and real-world business rules.

---

## ğŸš€ Tech Stack

- **Java 17+**
- **Spring Boot**
    - Spring Web
    - Spring Data JPA
- **PostgreSQL**
- **Hibernate**
- **Lombok**
- **Maven**

---

## ğŸ“š Domain Overview

The API currently models the following core concepts:

### ğŸ”¹ ClassType
Represents the type of class offered by the gym (e.g. Yoga, Crossfit).

Main fields:
- name (unique)
- description
- durationInMinutes
- maxCapacity

---

### ğŸ”¹ Trainer
Represents an instructor responsible for leading classes.

Main fields:
- name
- email (unique)
- specialty
- phone
- bio
- active (soft delete support)

---

### ğŸ”¹ ClassSession
Represents a scheduled instance of a class.

Main characteristics:
- Linked to **one Trainer**
- Linked to **one ClassType**
- Has a `startTime`
- Has a `capacity` (with fallback to ClassType maxCapacity)
- Uses **soft delete** (`active = false`)

Business rules enforced:
- Sessions cannot start in the past
- Capacity must be > 0
- Capacity cannot exceed ClassType maxCapacity
- Capacity defaults to ClassType maxCapacity if not provided
- Inactive sessions cannot be deleted twice

---

## ğŸ§  Architecture & Design Decisions

- **Layered architecture**
    - Controller â†’ Service â†’ Repository
- **DTOs (Data Transfer Objects)** are used for request payloads
- **Entities are not exposed directly in requests**
- **Centralized exception handling** with `@RestControllerAdvice`
- **Soft delete** strategy for ClassSession
- **Business rules live in the Service layer**
- **Controllers are kept thin**, validating only HTTP contract concerns

---

## ğŸ“¦ API Endpoints (Current)

### Class Sessions

| Method | Endpoint | Description |
|------|--------|------------|
| POST | `/class-sessions` | Create a class session |
| GET | `/class-sessions` | List active class sessions |
| GET | `/class-sessions/{id}` | Get session by id |
| PUT | `/class-sessions/{id}` | Update session |
| DELETE | `/class-sessions/{id}` | Soft delete session |

---

## âš ï¸ Error Handling

The API returns structured error responses with:
- HTTP status code
- Error message
- Timestamp

Examples:
- `400 Bad Request` â€“ invalid input or business rule violation
- `404 Not Found` â€“ resource not found

---

## ğŸ› ï¸ Database

- PostgreSQL is used as the primary database
- Schema is managed automatically by Hibernate (development mode)
- All IDs are generated by the database

---

## ğŸ“Œ Project Status

ğŸš§ **In active development**

Planned next steps:
- Booking system (members booking class sessions)
- User & Authentication (Spring Security + JWT)
- Pagination and filtering
- Response DTOs
- Validation annotations (`@Valid`)
- Testing

---

## ğŸ¯ Purpose

This project is intended to:
- Practice real-world backend development
- Learn proper REST API design
- Apply clean architecture principles
- Serve as a portfolio project

---

## ğŸ‘¤ Author

Developed by **Ricardo Freitas**  
Backend-focused learning project using Spring Boot.
